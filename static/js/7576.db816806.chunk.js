(self.webpackChunk_uniswap_interface=self.webpackChunk_uniswap_interface||[]).push([[7576],{6918:(e,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageSchema=void 0;var i=s(20766);n.MessageSchema=i.z.object({})},88750:(e,n)=>{n.k=function(e,n){try{return n.parse(e)}catch(s){return}}},93711:(e,n,s)=>{n.Zp=n.fC=void 0;var i=s(6918),t=s(20766),r=function(e){return e.PasskeyRequest="PasskeyRequest",e}({}),a=(n.Zp=i.MessageSchema.extend({type:t.z.literal(r.PasskeyRequest),requestId:t.z.string(),challengeJson:t.z.string()}),n.fC=function(e){return e.PasskeySignInFlowOpened="PasskeySignInFlowOpened",e.PasskeyCredentialRetrieved="PasskeyCredentialRetrieved",e.PasskeyCredentialError="PasskeyCredentialError",e}({}));i.MessageSchema.extend({type:t.z.literal(a.PasskeySignInFlowOpened),requestId:t.z.string()}),i.MessageSchema.extend({type:t.z.literal(a.PasskeyCredentialRetrieved),requestId:t.z.string(),credential:t.z.string()}),i.MessageSchema.extend({type:t.z.literal(a.PasskeyCredentialError),requestId:t.z.string(),error:t.z.string()})},42932:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>i});const i={}},97576:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>M});var i=s(97755),t=s(33722),r=s(8718),a=s(20128),o=s(82663),l=s(86683),d=s(74235),c=s(59068),x=s(59793),g=s(35715),u=s(16065),p=s(29342),f=s(68016),_=s(88750),h=s(93711),y=s(42467),m=s(27754),v=s(46832),k=s(13052),S=s(36347);function b(e,n,s,i,t,r,a){try{var o=e[r](a),l=o.value}catch(d){return void s(d)}o.done?n(l):Promise.resolve(l).then(i,t)}function I(e){return function(){var n=this,s=arguments;return new Promise((function(i,t){var r=e.apply(n,s);function a(e){b(r,i,t,a,o,"next",e)}function o(e){b(r,i,t,a,o,"throw",e)}a(void 0)}))}}const P="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pt-t-space-spa1360334076 _pb-t-space-spa1360334076 ",j="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _pr-t-space-spa1360333927 _pl-t-space-spa1360333927 ",C="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center ",z="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-fit-content ",E="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-flex-end ",w="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _width-400px _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076 _flexDirection-column _gap-t-space-spa1360334076 ",D="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _justifyContent-center _minHeight-100vh ",q=3*k.ONE_SECOND_MS;function M(){const{t:e}=(0,o.useTranslation)(),n=(0,r.M)(),[s,k]=(0,a.useState)("Verifying"),[b,M]=(0,a.useState)(null),[N]=(0,l.useSearchParams)();(0,a.useEffect)((()=>{var e;if(!(null===(e=chrome)||void 0===e?void 0:e.runtime))return v.logger.debug("ExtensionPasskeySignIn.tsx","useEffect","No `chrome.runtime` found"),void k("Denied");const s=N.get("request_id");if(!s)return v.logger.debug("ExtensionPasskeySignIn.tsx","useEffect","No `request_id` found"),void k("Denied");const i=function(){var e=I((function*(e){const n=(0,_.k)(e,h.Zp);n?(v.logger.debug("ExtensionPasskeySignIn.tsx","handleMessageRequestPasskey",`Message received: ${n.type}`),k("Allowed"),M(n)):k("Denied")}));return function(n){return e.apply(this,arguments)}}();v.logger.debug("ExtensionPasskeySignIn.tsx","useEffect",`Sending PasskeySignInFlowOpened message to extension ID ${n}`),chrome.runtime.sendMessage(n,{type:h.fC.PasskeySignInFlowOpened,requestId:s},i)}),[]);const R=function(){var e=I((function*(){if("Allowed"===s&&b)try{const e=yield(0,y.authenticatePasskey)(b.challengeJson);if(!e)return v.logger.debug("ExtensionPasskeySignIn.tsx","onPressSignIn",`Sending PasskeyCredentialError message to extension ID ${n}`),void chrome.runtime.sendMessage(n,{type:h.fC.PasskeyCredentialError,requestId:b.requestId,error:"No credential returned"});v.logger.debug("ExtensionPasskeySignIn.tsx","onPressSignIn",`Sending PasskeyCredentialRetrieved message to extension ID ${n}`),chrome.runtime.sendMessage(n,{type:h.fC.PasskeyCredentialRetrieved,requestId:b.requestId,credential:e})}catch(e){v.logger.error(e,{tags:{file:"ExtensionPasskeySignIn/index.tsx",function:"onPressSignIn"}})}else v.logger.debug("ExtensionPasskeySignIn.tsx","onPressSignIn","Invalid state",{signInAttemptStatus:s,passkeyRequestData:b})}));return function(){return e.apply(this,arguments)}}();return(0,S.useTimeout)((()=>{k((e=>"Verifying"===e?"Denied":e))}),q),(0,i.jsx)(m.default,{logImpression:!0,page:"extension-passkey-sign-in-page",children:(0,i.jsx)("div",{className:D,children:(0,i.jsxs)("div",{className:w,children:[(0,i.jsx)("div",{className:E,children:(0,i.jsx)("div",{className:z,children:(0,i.jsx)(d.e,{target:"_blank",rel:"noreferrer",href:f.uniswapUrls.helpArticleUrls.passkeysInfo,children:(0,i.jsx)(c.z,{icon:(0,i.jsx)(t.T,{}),size:"xxsmall",emphasis:"secondary",children:e("common.getHelp.button")})})})}),(0,i.jsx)("div",{className:C,children:(0,i.jsx)(p.UniswapLogo,{size:"$icon.40",color:"$accent1"})}),"Denied"===s?(0,i.jsx)("div",{className:j,children:(0,i.jsx)(x.Text,{variant:"body3",textAlign:"center",children:e("extensionPasskeySignInPopUp.invalidReferrer")})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:C,children:(0,i.jsx)(x.Text,{variant:"subheading1",children:e("nav.signIn.button")})}),(0,i.jsx)("div",{className:j,children:(0,i.jsx)(x.Text,{variant:"body3",textAlign:"center",children:e("extensionPasskeySignInPopUp.description")})}),(0,i.jsx)("div",{className:P,children:(0,i.jsx)(c.z,{icon:"Verifying"===s?(0,i.jsx)(g.n,{}):(0,i.jsx)(u.Passkey,{}),size:"large",variant:"branded",onPress:R,isDisabled:"Allowed"!==s,children:"Allowed"===s?e("nav.signIn.button"):void 0})})]})]})})})}s(42932)},8718:(e,n,s)=>{"use strict";s.d(n,{M:()=>a});var i=s(52718),t=s(98195),r=s(85479);function a(){return(0,t.useDynamicConfigValue)(i.DynamicConfigs.ExternallyConnectableExtension,i.ExternallyConnectableExtensionConfigKey.ExtensionId,r.J.prod)}}}]);
//# sourceMappingURL=7576.db816806.chunk.js.map